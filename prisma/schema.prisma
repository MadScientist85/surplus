generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum LeadStatus {
  NEW
  CALLING
  REQUIRES_REVIEW
  QUALIFIED
  PACKET_SENT
  PACKET_SIGNED
  ARCHIVED
}

model Lead {
  id                 String     @id @default(cuid())
  firstName          String
  lastName           String
  phone              String
  email              String?
  estimatedSurplus   Float
  status             LeadStatus @default(NEW)
  
  // Call Tracking
  callAttempts       Int        @default(0)
  lastCallAt         DateTime?
  
  // AI Extracted Summary
  interested         Boolean?
  reason             String?    @db.Text
  documentsNeeded    String[]
  urgencyScore       Float?     
  qualificationScore Float?     
  
  // E-Sign Tracking
  packetUrl          String?    
  docEnvelopeId      String?   @unique
  docSignedUrl       String?
  docSentAt          DateTime?
  docSignedAt        DateTime?
  
  createdAt          DateTime   @default(now())
  updatedAt          DateTime   @updatedAt
}